<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.35.1">
    <meta name="project" content="ja_erl_utils v1.0.0">


    <title>ja_erl_utils_term â€” ja_erl_utils v1.0.0</title>
    <link rel="stylesheet" href="dist/html-erlang-4IXSOGMD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-53BFA6A2.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-PVRIOB7F.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://github.com/Juliusan/ja_erl_utils" class="sidebar-projectName" translate="no">
ja_erl_utils
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ja_erl_utils</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L15" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">ja_erl_utils_term</span> 
    <small class="app-vsn" translate="no">(ja_erl_utils v1.0.0)</small>

  </h1>


    <section id="moduledoc">
<p>Module for functions, that can be used on any Erlang term.</p><p>Some functions of this module were part of other projects. For example,
<a href="#format/1"><code class="inline">format/1</code></a> and <a href="#format/2"><code class="inline">format/2</code></a> functions are based on
<a href="https://github.com/Juliusan/erlang-tools/blob/0846571c616e354583dca91551a26a57b54edecc/src/erlang_tools_display_term_erl.erl#L78-L93"><code class="inline">erlang_tools_display_term_erl:to_binary/1,2</code></a>
functions of <a href="https://github.com/Juliusan/erlang-tools/">ErlangTools</a>
project.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:position/0" data-no-tooltip translate="no">position()</a>

      </div>

        <div class="summary-synopsis"><p>Position (address) inside Erlang's term.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:position_level/0" data-no-tooltip translate="no">position_level()</a>

      </div>

        <div class="summary-synopsis"><p>Address in single level of a position.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:position_level_id/0" data-no-tooltip translate="no">position_level_id()</a>

      </div>

        <div class="summary-synopsis"><p>Id of element in list, tuple or map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:position_level_index/0" data-no-tooltip translate="no">position_level_index()</a>

      </div>

        <div class="summary-synopsis"><p>Atomic address of element(s) in single level of a position.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#format/1" data-no-tooltip translate="no">format(Term)</a>

      </div>

        <div class="summary-synopsis"><p>Converts term to pretty formatted binary.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#format/2" data-no-tooltip translate="no">format(Term, Options)</a>

      </div>

        <div class="summary-synopsis"><p>Converts term <code class="inline">Term</code> to pretty formatted binary parametrized by <code class="inline">Options</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#memory_usage/1" data-no-tooltip translate="no">memory_usage(Term)</a>

      </div>

        <div class="summary-synopsis"><p>Estimates how much memory (in bytes) is used to store Erlang's term <code class="inline">Term</code>.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:position/0">

  <div class="detail-header">
    <a href="#t:position/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">position()</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L72" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> position() :: [<a href="#t:position_level/0">position_level</a>()].</pre>

      </div>

<p>Position (address) inside Erlang's term.</p><p>Position is a list of indexes for levels of term's depth. The first element
of the list corresponds to the outermost level of the term, the second
element - to the second level, etc. If the term doesn't have required depth
in required places, then the position doesn't address anything in it.</p><p>Empty position <code class="inline">[]</code> doesn't address any part of the term.</p><p>Here are some examples of position:</p><ul><li><code class="inline">[2]</code> addresses the second element of any list or tuple and map entry
with key <code class="inline">2</code>: atom <code class="inline">this</code> in <code class="inline">[a, this, b, c]</code> or <code class="inline">{a, this, b}</code> and
<code class="inline">2 =&gt; this</code> in <code class="inline">#{1 =&gt; a, 2 =&gt; this}</code>.</li><li><code class="inline">[key]</code> addresses map entry with key <code class="inline">key</code>: <code class="inline">key =&gt; this</code> in
<code class="inline">#{a =&gt; b, key =&gt; this}</code>.</li><li><code class="inline">[3, 2, key, 1]</code>: if term is a list or tuple, whose third element is a
list or tuple, whose second element is a map, which has entry with 'key' as
a key and a list or tuple as a value, then this position addresses the
first element of the last list or tuple: atom <code class="inline">this</code> in term
<code class="inline">[a, [b,c], {d, #{e =&gt; f, key =&gt; [this, g, h, i]}, j}]</code>.</li><li><code class="inline">[2, [2, 4]]</code>: if term is a list or tuple, whose second element is a list
or tuple, then this position addresses the second and the fourth elements of
the latter list or tuple: atoms <code class="inline">this</code> in term <code class="inline">[a, {b, this, c, this, d}]</code>.</li><li><code class="inline">[2, '*']</code>: if term is a list or tuple, whose second element is a list or
tuple, then this position addresses all the elements of the latter list or
tuple: atoms <code class="inline">this</code> in term <code class="inline">{a, [this, this, this]}</code>.</li><li><code class="inline">[2, {2, 4}]</code>: if term is a list or tuple, whose second element is a list
or tuple, then this position addresses elements starting with second and
ending with fourth of the latter list or tuple: atoms <code class="inline">this</code> in term
<code class="inline">[a, {b, this, this, this, c}]</code>.</li></ul>
  </section>
</section>
<section class="detail" id="t:position_level/0">

  <div class="detail-header">
    <a href="#t:position_level/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">position_level()</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L86" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> position_level() :: <a href="#t:position_level_index/0">position_level_index</a>() | [<a href="#t:position_level_index/0">position_level_index</a>()].</pre>

      </div>

<p>Address in single level of a position.</p><p>It can consist of one or several indexes. If it consists of several
indexes, it addresses all the elements addressed by at least one of the
indexes. For example, <code class="inline">[1, 3]</code> addresses first and third elements of list
or tuple at that level. <code class="inline">[2, {5, 8}]</code> addresses second element and all the
elements from fifth to eighth.</p>
  </section>
</section>
<section class="detail" id="t:position_level_id/0">

  <div class="detail-header">
    <a href="#t:position_level_id/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">position_level_id()</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L124" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> position_level_id() :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>() | <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>Id of element in list, tuple or map.</p><p>The type of id depends on the structure:</p><ul><li>In a list or tuple, elements are identified by integer, which denotes
element's position in the structure. <code class="inline">1</code> is used to identify the first
element.</li><li>In a map, elements (map entries) are identified by key. It can also
be integer, if such key is part of a map. However, it can be any term as
map keys are not limited to integers in Erlang. Note that id identifies the
whole entry: both key and value (not only the value). Currently there is no
way to identify key only or value only.</li></ul>
  </section>
</section>
<section class="detail" id="t:position_level_index/0">

  <div class="detail-header">
    <a href="#t:position_level_index/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">position_level_index()</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L101" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> position_level_index() ::
          <a href="#t:position_level_id/0">position_level_id</a>() | '*' | {From :: <a href="#t:position_level_id/0">position_level_id</a>(), To :: <a href="#t:position_level_id/0">position_level_id</a>()}.</pre>

      </div>

<p>Atomic address of element(s) in single level of a position.</p><p>The values can be:</p><ul><li>Id of single element,</li><li><code class="inline">'*'</code> meaning all the elements of list, tuple or map at that level,</li><li><code class="inline">{From, To}</code>   meaning all the elements starting from id <code class="inline">From</code> and ending
with id <code class="inline">End</code> (including <code class="inline">End</code>).</li></ul>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="format/1">

  <div class="detail-header">
    <a href="#format/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">format(Term)</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L146" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> format(Term :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>().</pre>

      </div>

<p>Converts term to pretty formatted binary.</p><p>Equivalent to calling <code class="inline">ja_erl_utils_term:format(Term, #{})</code>.</p>
  </section>
</section>
<section class="detail" id="format/2">

  <div class="detail-header">
    <a href="#format/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">format(Term, Options)</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L242" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> format(Term, Options) -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>()
                when
                    Term :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>(),
                    Options ::
                        #{single_indent_length => <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>(),
                          no_expansion => [<a href="#t:position/0">position</a>()] | true,
                          expand_map_keys => <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:boolean/0">boolean</a>()}.</pre>

      </div>

<p>Converts term <code class="inline">Term</code> to pretty formatted binary parametrized by <code class="inline">Options</code>.</p><p>Pretty formatting is designed with aim to be readable for humans. All the
list entries, tuple elements and key-value pairs of map are displayed on a
separate line with larger indentation than term, which contains the list,
tuple or map. The exception is lists, tuples and maps, which contain
exactly one element (the element is not displayed on a separate line) or
none elements at all (displayed in a single line).</p><p>Possible keys of <code class="inline">Options</code> are:</p><ul><li><p><code class="inline">single_indent_length</code> (default: <code class="inline">2</code>) - number of spaces, used in single
indent level.</p></li><li><p><code class="inline">no_expansion</code> (default: <code class="inline">[]</code>) - list of positions of terms in <code class="inline">Term</code>,
that should not be expanded to separate lines. For every position in this
list, term addressed by it will be displayed on a single line, ignoring the
amount of nested lists, tuples and maps in the addressed term.</p><p>  If value <code class="inline">true</code> is provided instead of a list, it means that <code class="inline">Term</code>
  itself should not be expanded. Compare:</p><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Term</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6033302966-1">{</span><span class="p" data-group-id="6033302966-2">[</span><span class="ss">first</span><span class="p">,</span><span class="w"> </span><span class="ss">second</span><span class="p" data-group-id="6033302966-2">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6033302966-3">#{</span><span class="mi">1</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6033302966-3">}</span><span class="p" data-group-id="6033302966-1">}</span><span class="p">.</span><span class="w">
  </span><span class="p" data-group-id="6033302966-4">{</span><span class="p" data-group-id="6033302966-5">[</span><span class="ss">first</span><span class="p">,</span><span class="ss">second</span><span class="p" data-group-id="6033302966-5">]</span><span class="p">,</span><span class="p" data-group-id="6033302966-6">#{</span><span class="mi">1</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6033302966-6">}</span><span class="p" data-group-id="6033302966-4">}</span><span class="w">
  </span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ja_erl_utils_terminal</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="6033302966-7">(</span><span class="s">&quot;</span><span class="si">~s</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6033302966-8">[</span><span class="nc">ja_erl_utils_term</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="6033302966-9">(</span><span class="n">Term</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6033302966-10">#{</span><span class="ss">no_expansion</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6033302966-11">[</span><span class="p" data-group-id="6033302966-12">[</span><span class="ss">&#39;*&#39;</span><span class="p" data-group-id="6033302966-12">]</span><span class="p" data-group-id="6033302966-11">]</span><span class="p" data-group-id="6033302966-10">}</span><span class="p" data-group-id="6033302966-9">)</span><span class="p" data-group-id="6033302966-8">]</span><span class="p" data-group-id="6033302966-7">)</span><span class="p">.</span><span class="w">
  </span><span class="p" data-group-id="6033302966-13">{</span><span class="w">
    </span><span class="p" data-group-id="6033302966-14">[</span><span class="ss">first</span><span class="p">,</span><span class="w"> </span><span class="ss">second</span><span class="p" data-group-id="6033302966-14">]</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6033302966-15">#{</span><span class="mi">1</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6033302966-15">}</span><span class="w">
  </span><span class="p" data-group-id="6033302966-13">}</span><span class="w">
  </span><span class="ss">ok</span><span class="w">
  </span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ja_erl_utils_terminal</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="6033302966-16">(</span><span class="s">&quot;</span><span class="si">~s</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6033302966-17">[</span><span class="nc">ja_erl_utils_term</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="6033302966-18">(</span><span class="n">Term</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6033302966-19">#{</span><span class="ss">no_expansion</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="6033302966-19">}</span><span class="p" data-group-id="6033302966-18">)</span><span class="p" data-group-id="6033302966-17">]</span><span class="p" data-group-id="6033302966-16">)</span><span class="p">.</span><span class="w">
  </span><span class="p" data-group-id="6033302966-20">{</span><span class="p" data-group-id="6033302966-21">[</span><span class="ss">first</span><span class="p">,</span><span class="w"> </span><span class="ss">second</span><span class="p" data-group-id="6033302966-21">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6033302966-22">#{</span><span class="mi">1</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6033302966-22">}</span><span class="p" data-group-id="6033302966-20">}</span><span class="w">
  </span><span class="ss">ok</span></code></pre><p>  Note that <code class="inline">no_expansion</code> may be a list of positions and never a single
  position not wrapped in a list. As position itself is a list, this
  results in quite strange list in a list value <code class="inline">[[*]]</code>.</p></li><li><p><code class="inline">expand_map_keys</code> (default: <code class="inline">false</code>) - wether lists, tuples and maps
should be expanded, if they are part of a key in a map. Usually keys of a
map are quite small and although in some cases they might be expandable, it
is usually preferable to display them in one line. E.g., if keys of a map
are coordinates in two dimensional space (<code class="inline">{X, Y}</code> or <code class="inline">#{x =&gt; X, y =&gt; Y}</code>)
it would be more readable if they are displayed in one line and values of
such map might be expanded to separate lines. Compare:</p><pre><code class="makeup erlang" translate="no"><span class="w">  </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Term</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="0007232193-1">#{</span><span class="p" data-group-id="0007232193-2">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="0007232193-2">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-3">{</span><span class="ss">first</span><span class="p">,</span><span class="w"> </span><span class="ss">second</span><span class="p">,</span><span class="w"> </span><span class="ss">third</span><span class="p" data-group-id="0007232193-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0007232193-4">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="0007232193-4">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-5">[</span><span class="ss">another</span><span class="p">,</span><span class="w"> </span><span class="ss">entry</span><span class="p" data-group-id="0007232193-5">]</span><span class="p" data-group-id="0007232193-1">}</span><span class="p">.</span><span class="w">
  </span><span class="p" data-group-id="0007232193-6">#{</span><span class="p" data-group-id="0007232193-7">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p" data-group-id="0007232193-7">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-8">{</span><span class="ss">first</span><span class="p">,</span><span class="ss">second</span><span class="p">,</span><span class="ss">third</span><span class="p" data-group-id="0007232193-8">}</span><span class="p">,</span><span class="p" data-group-id="0007232193-9">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p" data-group-id="0007232193-9">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-10">[</span><span class="ss">another</span><span class="p">,</span><span class="ss">entry</span><span class="p" data-group-id="0007232193-10">]</span><span class="p" data-group-id="0007232193-6">}</span><span class="w">
  </span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ja_erl_utils_terminal</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="0007232193-11">(</span><span class="s">&quot;</span><span class="si">~s</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0007232193-12">[</span><span class="nc">ja_erl_utils_term</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="0007232193-13">(</span><span class="n">Term</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0007232193-14">#{</span><span class="ss">expand_map_keys</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">false</span><span class="p" data-group-id="0007232193-14">}</span><span class="p" data-group-id="0007232193-13">)</span><span class="p" data-group-id="0007232193-12">]</span><span class="p" data-group-id="0007232193-11">)</span><span class="p">.</span><span class="w">
  </span><span class="p" data-group-id="0007232193-15">#{</span><span class="w">
    </span><span class="p" data-group-id="0007232193-16">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="0007232193-16">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-17">{</span><span class="w">
      </span><span class="ss">first</span><span class="p">,</span><span class="w">
      </span><span class="ss">second</span><span class="p">,</span><span class="w">
      </span><span class="ss">third</span><span class="w">
    </span><span class="p" data-group-id="0007232193-17">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0007232193-18">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="0007232193-18">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-19">[</span><span class="w">
      </span><span class="ss">another</span><span class="p">,</span><span class="w">
      </span><span class="ss">entry</span><span class="w">
    </span><span class="p" data-group-id="0007232193-19">]</span><span class="w">
  </span><span class="p" data-group-id="0007232193-15">}</span><span class="w">
  </span><span class="ss">ok</span><span class="w">
  </span><span class="o">&gt;</span><span class="w"> </span><span class="nc">ja_erl_utils_terminal</span><span class="p">:</span><span class="nf">print</span><span class="p" data-group-id="0007232193-20">(</span><span class="s">&quot;</span><span class="si">~s</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0007232193-21">[</span><span class="nc">ja_erl_utils_term</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="0007232193-22">(</span><span class="n">Term</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0007232193-23">#{</span><span class="ss">expand_map_keys</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ss">true</span><span class="p" data-group-id="0007232193-23">}</span><span class="p" data-group-id="0007232193-22">)</span><span class="p" data-group-id="0007232193-21">]</span><span class="p" data-group-id="0007232193-20">)</span><span class="p">.</span><span class="w">
  </span><span class="p" data-group-id="0007232193-24">#{</span><span class="w">
    </span><span class="p" data-group-id="0007232193-25">{</span><span class="w">
      </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="mi">2</span><span class="w">
    </span><span class="p" data-group-id="0007232193-25">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-26">{</span><span class="w">
      </span><span class="ss">first</span><span class="p">,</span><span class="w">
      </span><span class="ss">second</span><span class="p">,</span><span class="w">
      </span><span class="ss">third</span><span class="w">
    </span><span class="p" data-group-id="0007232193-26">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0007232193-27">{</span><span class="w">
      </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="mi">4</span><span class="w">
    </span><span class="p" data-group-id="0007232193-27">}</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0007232193-28">[</span><span class="w">
      </span><span class="ss">another</span><span class="p">,</span><span class="w">
      </span><span class="ss">entry</span><span class="w">
    </span><span class="p" data-group-id="0007232193-28">]</span><span class="w">
  </span><span class="p" data-group-id="0007232193-24">}</span><span class="w">
  </span><span class="ss">ok</span></code></pre></li></ul>
  </section>
</section>
<section class="detail" id="memory_usage/1">

  <div class="detail-header">
    <a href="#memory_usage/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">memory_usage(Term)</h1>

      <a href="https://github.com/Juliusan/ja_erl_utils/blob/1.0.0+build.26.ref93afb44/src/ja_erl_utils_term.erl#L287" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> memory_usage(Term :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()) ->
                      <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>() | {at_least, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>()} | {between, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>()}.</pre>

      </div>

<p>Estimates how much memory (in bytes) is used to store Erlang's term <code class="inline">Term</code>.</p><p>This function is based on <a href="https://www.erlang.org/doc/system/memory.html">an article about memory usage</a>
in Erlang's documentation, which describes <code class="inline">erts-8.0</code> system in OTP 19.0.
As the article itself is not very precise, this function may return:</p><ul><li>an integer, which means exact number of bytes as per article;</li><li><code class="inline">{at_least, Value}</code> - a term consumes at least <code class="inline">Value</code> number of bytes.
This is needed, because memory usage of large integers is not specified
accurately;</li><li><code class="inline">{between, From, To}</code> - a term consumes at least <code class="inline">From</code> and at most <code class="inline">To</code>
number of bytes. This is needed, because memory usage of binaries,
references, functions, etc... is specified as &quot;<code class="inline">From</code>-<code class="inline">To</code> words&quot;.</li></ul><p>The returned values are always divisible by word size of the system.</p><p>This function does not take into account:</p><ul><li>memory sharing of binaries (or other types) - each sub-term is counted
independently and then the values are added;</li><li>memory, consumed by atom, node, process, port or function tables;</li><li>memory, consumed by emulator internal data structures used for references;</li></ul><p>The article does not fully cover bitstrings, which are not binaries. This
function assumes that bitstring consumes the least possible number of full
words. E.g., if word takes 8 bytes, then 1-64 bit length bitstrings consume
1 word (8 bytes), 65-128 bit length bitstrings - 2 words (16 bytes), etc.</p><p>The article doesn't specify exactly, what it means by function environment.
This function evaluates the term (list) returned by calling
<code class="inline">erlang:fun_info(Term, env)</code> using the same rules as for any other term.</p><p>Finally, calling <code class="inline">erts_debug:flat_size(Term)</code> or <code class="inline">erts_debug:size(Term)</code>
will probably get more accurate result. However, these functions are
hidden, not documented and considered to be for internal use only.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ja_erl_utils.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.35.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
